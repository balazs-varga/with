<ng-container *ngIf="isLoading;else loadSuccess">
    <app-loading-spinner></app-loading-spinner>
</ng-container>

<ng-template #loadSuccess>
    <div class="page-banner p-relative smoothscroll" [ngClass]="{'pt-0': isLoggedIn()}">
        <img src="{{restaurant.banner}}" class="img-fluid full-width" alt="banner">
    </div>

    <section class="restaurent-details u-line">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="heading padding-tb-10">
                        <h3 class="text-light-black title fw-700 no-margin">{{restaurant.restaurantname}}</h3>
                        <p class="text-light-black sub-title no-margin">
                            <span class="r_info">
                                <i class="far"
                                    [ngClass]="{'fa-check-circle': restaurant.isonlinepayment, 'fa-times-circle not': !restaurant.isonlinepayment}"></i>
                                Online fizetés
                            </span>
                            <span class="r_info"><i class="far"
                                    [ngClass]="{'fa-check-circle': restaurant.iscash, 'fa-times-circle not': !restaurant.iscash}"></i>
                                Készpénzes fizetés </span>
                            <span class="r_info"><i class="far"
                                    [ngClass]="{'fa-check-circle': restaurant.isbankcard, 'fa-times-circle not': !restaurant.isbankcard}"></i>
                                Bankkártyás fizetés </span>
                            <span class="r_info">
                                <i class="far"
                                    [ngClass]="{'fa-check-circle': restaurant.isszepcard, 'fa-times-circle not': !restaurant.isszepcard}"></i>
                                Szép kártya
                            </span>
                        </p>
                        <p class="text-light-black sub-title no-margin"><span class="r_info"><i class="far"
                                    [ngClass]="{'fa-check-circle': restaurant.isdeliveryavailable, 'fa-times-circle not': !restaurant.isdeliveryavailable}"></i>
                                Házhozszállítás </span> <span class="r_info"><i class="far"
                                    [ngClass]="{'fa-check-circle': restaurant.ispickupavailable, 'fa-times-circle not': !restaurant.ispickupavailable}"></i>
                                Helyszíni átvétel </span> <span class="r_info"><i class="far"
                                    [ngClass]="{'fa-check-circle': restaurant.istablereservationavailable, 'fa-times-circle not': !restaurant.istablereservationavailable}"></i>
                                Asztalfoglalás </span>
                        </p>
                    </div>
                    <div *ngIf="restaurant.logo" class="restaurent-logo">
                        <img src="{{restaurant.logo}}" class="img-fluid" alt="logo">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div id="accordion">
        <div class="restaurent-tabs u-line">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="restaurent-menu">
                            <ul class="nav nav-pills">
                                <li class="nav-item"> <a class="nav-link text-light-white fw-700" data-toggle="collapse"
                                        data-target="#aboutcollapse">Információ</a>
                                </li>
                                <li class="nav-item"> <a class="nav-link text-light-white fw-700" data-toggle="collapse"
                                        data-target="#mapgallerycollapse">Térkép & Galéria</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- restaurent tab -->
        <!-- restaurent about -->
        <section class="restaurant-section-padding restaurent-about collapse" id="aboutcollapse"
            data-parent="#accordion">
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <h3 class="text-light-black fw-700 title">{{restaurant.restaurantname}}</h3>
                        <p class="text-light-green no-margin">{{restaurant.restaurantdescription}}</p>
                        <ul class="about-restaurent">
                            <li *ngIf="restaurant.restaurantaddress"> <i class="fas fa-map-marker-alt"></i>
                                <span>
                                    <a class="text-light-white">
                                        {{restaurant.restaurantaddress}}
                                    </a>
                                </span>
                            </li>
                            <li *ngIf="restaurant.restaurantphone"> <i class="fas fa-phone-alt"></i>
                                <span><a class="text-light-white">{{restaurant.restaurantphone}}</a></span>
                            </li>
                            <li *ngIf="restaurant.restaurantemail"> <i class="far fa-envelope"></i>
                                <span><a href="mailto:{{restaurant.restaurantemail}}"
                                        class="text-light-white">{{restaurant.restaurantemail}}</a></span>
                            </li>
                            <li *ngIf="restaurant.restaurantfacebook"> <i class="fab fa-facebook"></i>
                                <span><a (click)="navigateToFacebook(restaurant.restaurantfacebook)"
                                        class="text-light-white cursor-pointer">{{restaurant.restaurantfacebook}}</a></span>
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <div class="restaurent-schdule">
                            <div class="card">
                                <div class="card-header text-light-white fw-700 fs-16">Nyitvatartás
                                    <span *ngIf="restaurant.isrestaurantopenfororders" class="opening">Nyitva</span>
                                    <span *ngIf="!restaurant.isrestaurantopenfororders" class="opening">Zárva</span>
                                </div>
                                <div class="card-body">
                                    <div class="schedule-box">
                                        <div class="day text-light-black">Hétfő</div>
                                        <div *ngIf="restaurant.monday !== 'Zárva'" class="time text-light-black">
                                            Rendelés
                                            leadás: {{restaurant.monday}}</div>
                                        <div *ngIf="restaurant.monday === 'Zárva'" class="time text-light-black">
                                            {{restaurant.monday}}</div>
                                    </div>
                                    <div class="collapse" id="schdule">
                                        <div class="schedule-box">
                                            <div class="day text-light-black">Kedd</div>
                                            <div *ngIf="restaurant.tuesday !== 'Zárva'" class="time text-light-black">
                                                Rendelés leadás: {{restaurant.tuesday}}</div>
                                            <div *ngIf="restaurant.tuesday === 'Zárva'" class="time text-light-black">
                                                {{restaurant.tuesday}}</div>
                                        </div>
                                        <div class="schedule-box">
                                            <div class="day text-light-black">Szerda</div>
                                            <div *ngIf="restaurant.wednesday !== 'Zárva'" class="time text-light-black">
                                                Rendelés leadás: {{restaurant.wednesday}}</div>
                                            <div *ngIf="restaurant.wednesday === 'Zárva'" class="time text-light-black">
                                                {{restaurant.wednesday}}</div>
                                        </div>
                                        <div class="schedule-box">
                                            <div class="day text-light-black">Csütörtök</div>
                                            <div *ngIf="restaurant.thursday !== 'Zárva'" class="time text-light-black">
                                                Rendelés leadás: {{restaurant.thursday}}</div>
                                            <div *ngIf="restaurant.thursday === 'Zárva'" class="time text-light-black">
                                                {{restaurant.thursday}}</div>
                                        </div>
                                        <div class="schedule-box">
                                            <div class="day text-light-black">Péntek</div>
                                            <div *ngIf="restaurant.friday !== 'Zárva'" class="time text-light-black">
                                                Rendelés leadás: {{restaurant.friday}}</div>
                                            <div *ngIf="restaurant.friday === 'Zárva'" class="time text-light-black">
                                                {{restaurant.friday}}</div>
                                        </div>
                                        <div class="schedule-box">
                                            <div class="day text-light-black">Szombat</div>
                                            <div *ngIf="restaurant.saturday !== 'Zárva'" class="time text-light-black">
                                                Rendelés leadás: {{restaurant.saturday}}</div>
                                            <div *ngIf="restaurant.saturday === 'Zárva'" class="time text-light-black">
                                                {{restaurant.saturday}}</div>
                                        </div>
                                        <div class="schedule-box">
                                            <div class="day text-light-black">Vasárnap</div>
                                            <div *ngIf="restaurant.sunday !== 'Zárva'" class="time text-light-black">
                                                Rendelés leadás: {{restaurant.sunday}}</div>
                                            <div *ngIf="restaurant.sunday === 'Zárva'" class="time text-light-black">
                                                {{restaurant.sunday}}</div>
                                        </div>
                                    </div>
                                    <div class="card-footer"> <a class="fw-500 collapsed" data-toggle="collapse"
                                            href="#schdule">Teljes nyitvatartás megtekintése</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- restaurent about -->
        <!-- map gallery -->
        <div class="map-gallery-sec restaurant-section-padding bg-light-theme collapse" id="mapgallerycollapse"
            data-parent="#accordion">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="main-box">
                            <div class="row">
                                <div class="col-md-6" *ngIf="mapEmbed">
                                    <iframe id="locmap" [src]="mapEmbed"></iframe>
                                </div>
                                <div class="col-md-6">
                                    <div class="gallery-box padding-10">
                                        <ul class="gallery-img">
                                            <li>
                                                <a class="image-popup"  *ngIf="restaurant.img1">
                                                    <img src="{{restaurant.img1}}" class="img-fluid full-width"
                                                        alt="img1" />
                                                </a>
                                            </li>
                                            <li>
                                                <a class="image-popup" *ngIf="restaurant.img2">
                                                    <img src="{{restaurant.img2}}" class="img-fluid full-width"
                                                        alt="img2" />
                                                </a>
                                            </li>
                                            <li>
                                                <a class="image-popup" *ngIf="restaurant.img3">
                                                    <img src="{{restaurant.img3}}" class="img-fluid full-width"
                                                        alt="img3" />
                                                </a>
                                            </li>
                                            <li>
                                                <a class="image-popup" *ngIf="restaurant.img4">
                                                    <img src="{{restaurant.img4}}" class="img-fluid full-width"
                                                        alt="img4" />
                                                </a>
                                            </li>
                                            <li>
                                                <a class="image-popup" *ngIf="restaurant.img5">
                                                    <img src="{{restaurant.img5}}" class="img-fluid full-width"
                                                        alt="img5" />
                                                </a>
                                            </li>
                                            <li>
                                                <a class="image-popup" *ngIf="restaurant.img6">
                                                    <img src="{{restaurant.img6}}" class="img-fluid full-width"
                                                        alt="img6" />
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- map gallery -->
    </div>
    <!-- restaurent reviews -->
    <!-- restaurent address -->
    <div class="restaurent-address u-line">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="address-details">
                        <div class="address">
                            <div *ngIf="restaurant.isdeliveryavailable" class="deliverymode"> <a
                                    class="text-light-black">Házhozszállítás, ({{restaurant.potentialdeliverytime}})</a>
                                <div class="deliverymode"> <span class="text-light-white"><i
                                            class="fas fa-shopping-basket"></i> Minimum kosárérték:
                                        {{restaurant.minimumordervalue}} Ft</span><span class="text-light-white">, <i
                                            class="fas fa-truck"></i> Házhozszállítás: {{restaurant.deliveryprice}}
                                        Ft</span>
                                </div>
                            </div>
                            <div class="change-address"> <a class="fw-500 cursor-pointer"
                                    (click)="locationService.changeIsLocationSelectorOpen(true)">Jelenlegi város
                                    módosítása</a>
                            </div>
                        </div>
                        <p class="text-light-white no-margin addresses"><i class="fas fa-map-marker-alt"></i>
                            Házhozszállítás ezen
                            belül:
                            <ng-container *ngFor="let zip of restaurant?.zipcodes; let last = last">
                                <a class="fw-500">{{zip?.zipcode}} {{zip?.city}}</a>
                                <ng-container *ngIf="!last">
                                    <span class="mr-2">,</span>
                                </ng-container>
                            </ng-container>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- restaurent address -->
    <!-- restaurent meals -->
    <section class="restaurant-section-padding restaurent-meals bg-light-theme">
        <div class="container-fluid">
            <div class="row">
                <div class="col-xl-3 col-lg-3 res-cat-padding">
                    <div class="row">
                        <div class="col-12">
                            <div class="card res-categories">
                                <ng-container *ngIf="restaurant.categories && restaurant.categories.length > 0">
                                    <div class="card-header padding-15 fw-700 categories-header">Kategóriák</div>
                                    <ng-container
                                        *ngFor="let category of productsByCategory | keyvalue: keyAscOrder; let i = index">
                                        <nav *ngIf="category.value.length > 0"
                                            class="nav flex-column pink lighten-3 py-4 mb-r font-weight-bold z-depth-1 categories-nav cursor-pointer">
                                            <a class="nav-link white-text"
                                                (click)="internalRoute('category-products', i)">{{category.key.category}}</a>
                                        </nav>
                                    </ng-container>
                                </ng-container>
                            </div>
                        </div>

                        <ng-container *ngIf="pizzaDesigner?.available">
                            <div class="col-12">
                                <div class="card res-categories pizza-creator">
                                    <nav
                                        class="nav flex-column pink lighten-3 py-4 mb-r font-weight-bold z-depth-1 categories-nav cursor-pointer">
                                        <a class="nav-link active white-text" (click)="toggleShowPizzaCreator()">Pizza
                                            Tervező
                                            <i class="fas fa-angle-right"></i></a>
                                    </nav>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </div>
                <div class="col-xl-6 col-lg-6 smoothscroll" id="menu">
                    <div *ngIf="zip && !isRestaurantDeliversToSelectedCity()" class="with-alert">
                        <h4>Az ön által megadott irányítószámon belül ez az étterem sajnos nem szállít házhoz.</h4>
                        <p>A jelenleg beállított irányítószáma: <b>{{zip}}</b> Amennyiben ezen belül szeretne rendelni,
                            <a routerLink="/">keressen másik éttermet</a>, egyéb esetben <a class="cursor-pointer"
                                (click)="locationService.changeIsLocationSelectorOpen(true)">adjon meg másik
                                irányítószámot</a>.
                        </p>
                    </div>
                    <div *ngIf="!zip" class="with-alert">
                        <h4>Nézzük, hogy a(z) {{restaurant.restaurantname}} szállít-e önhöz.</h4>
                        <p><a class="cursor-pointer" (click)="locationService.changeIsLocationSelectorOpen(true)">Az
                                irányítószámának megadásához kattintson ide</a>.</p>
                    </div>

                    <ng-container *ngIf="!isLoggedIn()">
                        <div class="with-alert">
                            <h4>A rendelés összeállításához és leadásához bejelentkezés szükséges!</h4>
                            <a routerLink="/login"
                                class="btn-first green-btn text-custom-white fw-500 with-btn">Bejelentkezés</a>
                            <p>Még nincs felhasználói fiókja? <a routerLink="/registration">Regisztráljon most!</a></p>
                        </div>
                    </ng-container>

                    <div class="row">
                        <div class="col-lg-12 restaurent-meal-head mb-md-40">
                            <ng-container *ngIf="isPizzaCreatorShow">
                                <div class="card" id="pizzadesigner" data-toggle="modal"
                                    [attr.data-target]="zip ? '' : '#missing-zip'">
                                    <div class="card-header">
                                        <div class="section-header-left">
                                            <h3 class="text-light-black header-title">
                                                <a class="card-link text-light-black no-margin" data-toggle="collapse"
                                                    href="#pizzacreator">Pizza Tervező</a>
                                            </h3>
                                        </div>
                                    </div>
                                    <div id="pizzacreator" class="collapse show">
                                        <div class="card-body pizzadesigner" *ngIf="pizzaForm" [formGroup]="pizzaForm">
                                            <div class="row with-nomargin">
                                                <div class="col-xl-5  col-lg-12 col-md-12 with-nopadding">
                                                    <div class="pizza-preview">
                                                        <div class="pizza-base">
                                                            <div class="pizza-topping-image"
                                                                style="background-image: url('assets/img/salami.png');">
                                                                <div class="pizza-topping-image"
                                                                    style="background-image: url('assets/img/mashroom.png');">
                                                                    <img src="assets/img/pizza_base.png"
                                                                        style="visibility: hidden;">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-xl-7 col-lg-12 col-md-12 with-nopadding">
                                                    <div class="pizza-preview" id="pizza-accordion">
                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h5 class="no-margin">
                                                                    <a class="card-link text-light-black fw-700"
                                                                        data-toggle="collapse" data-target="#size"
                                                                        aria-expanded="true" aria-controls="size">
                                                                        <span>Méretek <span
                                                                                class="text-light-white fw-500 fs-12 padding-tb-10">Kötelező</span></span>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div id="size" class="collapse show pizza-x"
                                                                data-parent="#pizza-accordion">
                                                                <div class="card-body card-body-pizza">
                                                                    <ng-container
                                                                        *ngFor="let size of pizzaDesigner?.sizes; let i = index">
                                                                        <div class="form-check with-check">
                                                                            <input class="form-check-input pizza-input"
                                                                                type="radio"
                                                                                name="pizzadesigner_size_id"
                                                                                id="size-{{i}}" value="{{size.id}}"
                                                                                formControlName="pizzadesigner_size_id">
                                                                            <label class="form-check-label"
                                                                                for="pizzadesigner_size_id">
                                                                                {{size.size}} cm
                                                                            </label>
                                                                            <label class="price pizza-input-price"
                                                                                for="pizzadesigner_size_id">{{size.price}}
                                                                                ft</label>
                                                                        </div>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h5 class="no-margin">
                                                                    <a class="card-link collapsed text-light-black fw-700"
                                                                        data-toggle="collapse" data-target="#dough"
                                                                        aria-expanded="false" aria-controls="dough">
                                                                        <span>Tészták <span
                                                                                class="text-light-white fw-500 fs-12 padding-tb-10">Kötelező</span></span>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div *ngIf="pizzaForm.value.pizzadesigner_size_id"
                                                                id="dough" class="collapse pizza-x"
                                                                data-parent="#pizza-accordion">
                                                                <div class="card-body card-body-pizza">
                                                                    <ng-container
                                                                        *ngFor="let dough of getDoughsOfSelectedPizzaSize(); let i = index">
                                                                        <div class="form-check with-check">
                                                                            <input class="form-check-input pizza-input"
                                                                                type="radio"
                                                                                name="pizzadesigner_dough_id"
                                                                                id="dough-{{i}}" value="{{dough.id}}"
                                                                                formControlName="pizzadesigner_dough_id">
                                                                            <label class="form-check-label"
                                                                                for="pizzadesigner_dough_id">
                                                                                {{dough.name}}
                                                                            </label>
                                                                            <label
                                                                                *ngIf="dough.price === '0';else doughPrice"
                                                                                class="price pizza-input-price"
                                                                                for="pizzadesigner_dough_id">Ingyenes</label>
                                                                            <ng-template #doughPrice>
                                                                                <label class="price pizza-input-price"
                                                                                    for="pizzadesigner_dough_id">{{dough.price}}
                                                                                    ft</label>
                                                                            </ng-template>
                                                                        </div>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h5 class="no-margin">
                                                                    <a class="card-link collapsed text-light-black fw-700"
                                                                        data-toggle="collapse" data-target="#base"
                                                                        aria-expanded="false" aria-controls="base">
                                                                        <span>Alapok <span
                                                                                class="text-light-white fw-500 fs-12 padding-tb-10">Kötelező</span></span>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div *ngIf="pizzaForm.value.pizzadesigner_size_id" id="base"
                                                                class="collapse pizza-x" data-parent="#pizza-accordion">
                                                                <div class="card-body card-body-pizza">
                                                                    <ng-container
                                                                        *ngFor="let base of getBasesOfSelectedPizzaSize(); let i = index">
                                                                        <div class="form-check with-check">
                                                                            <input class="form-check-input pizza-input"
                                                                                type="radio"
                                                                                name="pizzadesigner_base_id"
                                                                                id="base-{{i}}" value="{{base.id}}"
                                                                                formControlName="pizzadesigner_base_id">
                                                                            <label class="form-check-label"
                                                                                for="pizzadesigner_base_id">
                                                                                {{base.name}}
                                                                            </label>
                                                                            <label
                                                                                *ngIf="base.price === '0';else basePrice"
                                                                                class="price pizza-input-price"
                                                                                for="pizzadesigner_base_id">Ingyenes</label>
                                                                            <ng-template #basePrice>
                                                                                <label class="price pizza-input-price"
                                                                                    for="pizzadesigner_base_id">{{base.price}}
                                                                                    ft</label>
                                                                            </ng-template>
                                                                        </div>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h5 class="no-margin">
                                                                    <a class="card-link collapsed text-light-black fw-700"
                                                                        data-toggle="collapse" data-target="#meat"
                                                                        aria-expanded="false" aria-controls="meat">
                                                                        <span>Húsok <span
                                                                                class="text-light-white fw-500 fs-12 padding-tb-10"></span></span>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div *ngIf="pizzaForm.value.pizzadesigner_size_id" id="meat"
                                                                class="collapse pizza-x" data-parent="#pizza-accordion">
                                                                <div class="card-body card-body-pizza">
                                                                    <ng-container
                                                                        *ngFor="let meat of getMeatsOfSelectedPizzaSize(); let i = index">
                                                                        <div class="form-check with-check">
                                                                            <input class="form-check-input pizza-input"
                                                                                type="checkbox" name="meat-{{i}}"
                                                                                id="meat-{{i}}"
                                                                                (change)="pizzaToppingCheckBoxChange(meat.id, $event.target.checked)"
                                                                                value="{{meat.id}}">
                                                                            <label class="form-check-label"
                                                                                for="meat-{{i}}">
                                                                                {{meat.name}}
                                                                            </label>
                                                                            <label
                                                                                *ngIf="meat.price === '0';else meatPrice"
                                                                                class="price pizza-input-price"
                                                                                for="meat-{{i}}">Ingyenes</label>
                                                                            <ng-template #meatPrice>
                                                                                <label class="price pizza-input-price"
                                                                                    for="meat-{{i}}">{{meat.price}}
                                                                                    ft</label>
                                                                            </ng-template>
                                                                        </div>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h5 class="no-margin">
                                                                    <a class="card-link collapsed text-light-black fw-700"
                                                                        data-toggle="collapse" data-target="#cheese"
                                                                        aria-expanded="false" aria-controls="cheese">
                                                                        <span>Sajtok <span
                                                                                class="text-light-white fw-500 fs-12 padding-tb-10"></span></span>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div *ngIf="pizzaForm.value.pizzadesigner_size_id"
                                                                id="cheese" class="collapse pizza-x"
                                                                data-parent="#pizza-accordion">
                                                                <div class="card-body card-body-pizza">
                                                                    <ng-container
                                                                        *ngFor="let cheese of getCheesesOfSelectedPizzaSize(); let i = index">
                                                                        <div class="form-check with-check">
                                                                            <input class="form-check-input pizza-input"
                                                                                type="checkbox" name="cheese-{{i}}"
                                                                                (change)="pizzaToppingCheckBoxChange(cheese.id, $event.target.checked)"
                                                                                id="cheese-{{i}}" value="{{cheese.id}}">
                                                                            <label class="form-check-label"
                                                                                for="cheese-{{i}}">
                                                                                {{cheese.name}}
                                                                            </label>
                                                                            <label
                                                                                *ngIf="cheese.price === '0';else cheesePrice"
                                                                                class="price pizza-input-price"
                                                                                for="cheese-{{i}}">Ingyenes</label>
                                                                            <ng-template #cheesePrice>
                                                                                <label class="price pizza-input-price"
                                                                                    for="cheese-{{i}}">{{cheese.price}}
                                                                                    ft</label>
                                                                            </ng-template>
                                                                        </div>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h5 class="no-margin">
                                                                    <a class="card-link collapsed text-light-black fw-700"
                                                                        data-toggle="collapse" data-target="#vegetable"
                                                                        aria-expanded="false" aria-controls="vegetable">
                                                                        <span>Zöldségek <span
                                                                                class="text-light-white fw-500 fs-12 padding-tb-10"></span></span>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div *ngIf="pizzaForm.value.pizzadesigner_size_id"
                                                                id="vegetable" class="collapse pizza-x"
                                                                data-parent="#pizza-accordion">
                                                                <div class="card-body card-body-pizza">
                                                                    <ng-container
                                                                        *ngFor="let vegetable of getVegetablesOfSelectedPizzaSize(); let i = index">
                                                                        <div class="form-check with-check">
                                                                            <input class="form-check-input pizza-input"
                                                                                type="checkbox" name="vegetable-{{i}}"
                                                                                id="vegetable-{{i}}"
                                                                                (change)="pizzaToppingCheckBoxChange(vegetable.id, $event.target.checked)"
                                                                                value="{{vegetable.id}}">
                                                                            <label class="form-check-label"
                                                                                for="vegetable-{{i}}">
                                                                                {{vegetable.name}}
                                                                            </label>
                                                                            <label
                                                                                *ngIf="vegetable.price === '0';else vegetablePrice"
                                                                                class="price pizza-input-price"
                                                                                for="vegetable-{{i}}">Ingyenes</label>
                                                                            <ng-template #vegetablePrice>
                                                                                <label class="price pizza-input-price"
                                                                                    for="vegetable-{{i}}">{{vegetable.price}}
                                                                                    ft</label>
                                                                            </ng-template>
                                                                        </div>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h5 class="no-margin">
                                                                    <a class="card-link collapsed text-light-black fw-700"
                                                                        data-toggle="collapse" data-target="#fruit"
                                                                        aria-expanded="false" aria-controls="fruit">
                                                                        <span>Gyümölcsök <span
                                                                                class="text-light-white fw-500 fs-12 padding-tb-10"></span></span>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div *ngIf="pizzaForm.value.pizzadesigner_size_id"
                                                                id="fruit" class="collapse pizza-x"
                                                                data-parent="#pizza-accordion">
                                                                <div class="card-body card-body-pizza">
                                                                    <ng-container
                                                                        *ngFor="let fruit of getFruitsOfSelectedPizzaSize(); let i = index">
                                                                        <div class="form-check with-check">
                                                                            <input class="form-check-input pizza-input"
                                                                                type="checkbox" name="fruit-{{i}}"
                                                                                id="fruit-{{i}}"
                                                                                (change)="pizzaToppingCheckBoxChange(fruit.id, $event.target.checked)"
                                                                                value="{{fruit.id}}">
                                                                            <label class="form-check-label"
                                                                                for="fruit-{{i}}">
                                                                                {{fruit.name}}
                                                                            </label>
                                                                            <label
                                                                                *ngIf="fruit.price === '0';else fruitPrice"
                                                                                class="price pizza-input-price"
                                                                                for="fruit-{{i}}">Ingyenes</label>
                                                                            <ng-template #fruitPrice>
                                                                                <label class="price pizza-input-price"
                                                                                    for="fruit-{{i}}">{{fruit.price}}
                                                                                    ft</label>
                                                                            </ng-template>
                                                                        </div>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h5 class="no-margin">
                                                                    <a class="card-link collapsed text-light-black fw-700"
                                                                        data-toggle="collapse" data-target="#other"
                                                                        aria-expanded="false" aria-controls="other">
                                                                        <span>Egyebek <span
                                                                                class="text-light-white fw-500 fs-12 padding-tb-10"></span></span>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div *ngIf="pizzaForm.value.pizzadesigner_size_id"
                                                                id="other" class="collapse pizza-x"
                                                                data-parent="#pizza-accordion">
                                                                <div class="card-body card-body-pizza">
                                                                    <ng-container
                                                                        *ngFor="let other of getOthersOfSelectedPizzaSize(); let i = index">
                                                                        <div class="form-check with-check">
                                                                            <input class="form-check-input pizza-input"
                                                                                type="checkbox" name="other-{{i}}"
                                                                                (change)="pizzaToppingCheckBoxChange(other.id, $event.target.checked)"
                                                                                id="other-{{i}}" value="{{other.id}}">
                                                                            <label class="form-check-label"
                                                                                for="other-{{i}}">
                                                                                {{other.name}}
                                                                            </label>
                                                                            <label
                                                                                *ngIf="other.price === '0';else otherPrice"
                                                                                class="price pizza-input-price"
                                                                                for="other-{{i}}">Ingyenes</label>
                                                                            <ng-template #otherPrice>
                                                                                <label class="price pizza-input-price"
                                                                                    for="other-{{i}}">{{other.price}}
                                                                                    ft</label>
                                                                            </ng-template>
                                                                        </div>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </div>

                                                        <div class="card">
                                                            <div class="card-header">
                                                                <h5 class="no-margin">
                                                                    <a class="card-link collapsed text-light-black fw-700"
                                                                        data-toggle="collapse" data-target="#sauces"
                                                                        aria-expanded="false" aria-controls="sauces">
                                                                        <span>Szószok <span
                                                                                class="text-light-white fw-500 fs-12 padding-tb-10"></span></span>
                                                                    </a>
                                                                </h5>
                                                            </div>
                                                            <div *ngIf="pizzaForm.value.pizzadesigner_size_id"
                                                                id="sauces" class="collapse pizza-x"
                                                                data-parent="#pizza-accordion">
                                                                <div class="card-body card-body-pizza">
                                                                    <ng-container
                                                                        *ngFor="let sauce of getSaucesOfSelectedPizzaSize(); let i = index">
                                                                        <div class="form-check with-check">
                                                                            <input class="form-check-input pizza-input"
                                                                                type="checkbox" name="sauce-{{i}}"
                                                                                id="sauce-{{i}}"
                                                                                (change)="pizzaSaucesCheckBoxChange(sauce.id, $event.target.checked)"
                                                                                value="{{sauce.id}}">
                                                                            <label class="form-check-label"
                                                                                for="sauce-{{i}}">
                                                                                {{sauce.name}}
                                                                            </label>
                                                                            <label
                                                                                *ngIf="sauce.price === '0';else saucePrice"
                                                                                class="price pizza-input-price"
                                                                                for="sauce-{{i}}">Ingyenes</label>
                                                                            <ng-template #saucePrice>
                                                                                <label class="price pizza-input-price"
                                                                                    for="sauce-{{i}}">{{sauce.price}}
                                                                                    ft</label>
                                                                            </ng-template>
                                                                        </div>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="w-100">
                                                    <div class="product-quantity padding-10 pl-0">
                                                        <span class="text-light-black fw-700 fs-16">Mennyiség</span>
                                                        <div class="input-group quantity">
                                                            <div class="input-group-append">
                                                                <button class="minus-btn" type="button" name="button"
                                                                    (click)="decreasePizzaQuantity()">
                                                                    <i class="fas fa-minus"></i>
                                                                </button>
                                                            </div>
                                                            <input id="pizza-quantity" type="text"
                                                                class="text-center background-grey" name="quantity"
                                                                formControlName="quantity" [readonly]="true">
                                                            <div class="input-group-prepend">
                                                                <button class="plus-btn" type="button" name="button"
                                                                    (click)="increasePizzaQuantity()"><i
                                                                        class="fas fa-plus"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-6 with-nopadding">
                                                            <h5 class="pizza-price">{{pizzaForm.value.totalPrice}} Ft
                                                            </h5>
                                                        </div>

                                                        <div class="col-6 with-nopadding">
                                                            <button class="btn-second with-btn btn-submit pizza-cart"
                                                                (click)="addPizzaToCart()"
                                                                [disabled]="!isLoggedIn() || !this.pizzaForm.valid || isRestaurantClosed()"
                                                                data-dismiss="modal">Kosárba</button>
                                                        </div>
                                                    </div>
                                                    <small *ngIf="pizzaForm.controls.toppings?.errors?.tooMuch"
                                                        class="row text-danger justify-content-end mr-1 mt-2 font-12">A
                                                        maximálisan kiválasztható feltét
                                                        {{pizzaForm.controls.toppings?.errors?.tooMuch}} db!</small>
                                                    <ng-container *ngIf="!isLoggedIn()">
                                                        <p class="with-alert mt-4">A rendelés összeállításához és
                                                            leadásához
                                                            bejelentkezés szükséges!</p>
                                                    </ng-container>
                                                    <ng-container *ngIf="isRestaurantClosed()">
                                                        <p class="with-alert mt-4">Az étterem jelenleg zárva van, nézzen
                                                            vissza később!</p>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="this.restaurant.categories?.length > 0">
                                <ng-container
                                    *ngFor="let category of productsByCategory | keyvalue: keyAscOrder; let i = index">
                                    <div *ngIf="category.value.length > 0" id="category-{{i}}" class="card">
                                        <div id="category-products-{{i}}" class="card-header">
                                            <div class="section-header-left">
                                                <h3 class="text-light-black header-title">
                                                    <a class="card-link text-light-black no-margin"
                                                        data-toggle="collapse"
                                                        href="#category-products-{{i}}-list">{{category.key.category}}</a>
                                                </h3>
                                            </div>
                                        </div>
                                        <div id="category-products-{{i}}-list" class="collapse show">
                                            <div class="card-body no-padding">
                                                <div class="row">
                                                    <ng-container *ngFor="let product of category.value; let j = index">
                                                        <div class="col-lg-12">
                                                            <div (click)="openModal(product)" class="with-product"
                                                                data-toggle="modal"
                                                                [attr.data-target]="!zip ? '#missing-zip' : zip && product.price ?  '#restaurent-popup' : null">
                                                                <div class="row with-nomargin h-100">
                                                                    <div class="col-lg-3 col-md-12 with-nopadding">
                                                                        <div class="with-product-img"
                                                                            style="background-image: url({{product.image}})">
                                                                        </div>
                                                                    </div>
                                                                    <div
                                                                        class="col-lg-9 col-md-12 with-product-info h-100">
                                                                        <div class="with-product-info-top">
                                                                            <h6 class="with-product-title">
                                                                                {{product.name}}
                                                                                <span *ngIf="product.type === 'menu'"
                                                                                    class="with-product-tag-menu">Menü</span>
                                                                                <ng-container *ngIf="product.is_sale">
                                                                                    <span
                                                                                        class="with-product-tag-sale">Akció</span>
                                                                                    <span
                                                                                        class="with-product-price"><span
                                                                                            class="with-product-old-price">{{product.old_price}}
                                                                                            Ft</span>
                                                                                        {{product.price
                                                                                        | number:'1.0-0'}} Ft</span>
                                                                                </ng-container>
                                                                                <ng-container *ngIf="!product.is_sale">
                                                                                    <span
                                                                                        class="with-product-price">{{product.price
                                                                                        | number:'1.0-0'}} Ft</span>
                                                                                </ng-container>
                                                                            </h6>
                                                                            <div class="with-product-description-box">
                                                                                <p class="with-product-description">
                                                                                    {{product.description}}
                                                                            </div>
                                                                        </div>
                                                                        <div class="with-product-icons">
                                                                            <img *ngIf="product.is_allergenicfree"
                                                                                class="with-product-icon"
                                                                                src="assets/img/icons/allergicfree.png">
                                                                            <img *ngIf="product.is_fatfree"
                                                                                class="with-product-icon"
                                                                                src="assets/img/icons/fatfree.png">
                                                                            <img *ngIf="product.is_vegan"
                                                                                class="with-product-icon"
                                                                                src="assets/img/icons/vegan.png">
                                                                            <img *ngIf="product.is_vegetarian"
                                                                                class="with-product-icon"
                                                                                src="assets/img/icons/vegetarian.png">
                                                                            <img *ngIf="product.is_glutenfree"
                                                                                class="with-product-icon"
                                                                                src="assets/img/icons/glutenfree.png">
                                                                            <img *ngIf="product.is_sugarfree"
                                                                                class="with-product-icon"
                                                                                src="assets/img/icons/sugarfree.png">
                                                                            <img *ngIf="product.is_lactosefree"
                                                                                class="with-product-icon"
                                                                                src="assets/img/icons/lactosefree.png">
                                                                            <img *ngIf="product.is_alcoholfree"
                                                                                class="with-product-icon"
                                                                                src="assets/img/icons/alcoholfree.png">

                                                                            <button
                                                                                class="btn-first green-btn text-custom-white fw-500 with-btn with-add-to-cart-btn with-cart-lg"
                                                                                [disabled]="!product.price">Kosárba</button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-3">
                    <div class="sidebar sidebar3">
                        <div class="cart-detail-box">
                            <div class="card">
                                <div class="card-header padding-15 fw-700 cart-header">Kosár</div>
                                <div class="card-body no-padding" id="scrollstyle-with"
                                    [ngClass]="{'h-auto': !isLoggedIn()}">
                                    <ng-container *ngIf="!isLoggedIn()">
                                        <div class="loggedout-cart">
                                            <h4>A kosár használatához jelentkezzen be!</h4>
                                            <a routerLink="/login"
                                                class="btn-first green-btn text-custom-white fw-500 with-btn">Bejelentkezés</a>
                                            <p>Még nincs felhasználói fiókja? <a
                                                    routerLink="/registration">Regisztráljon
                                                    most!</a></p>
                                        </div>
                                    </ng-container>

                                    <ng-container *ngIf="isLoggedIn()">
                                        <ng-container *ngIf="order; else noOrder">
                                            <ng-container *ngFor="let menu of order.menu; let i = index">
                                                <div class="cat-product-box">
                                                    <div class="cat-product">
                                                        <div class="cat-name">
                                                            <a>
                                                                <p class="text-with cart-text mr-2">
                                                                    <span
                                                                        class="text-dark-white">{{menu.quantity}}</span>
                                                                    {{menu.mealName}}
                                                                    <ng-container *ngIf="menu.sideName">
                                                                        , {{menu.sideName}}
                                                                    </ng-container>
                                                                    <ng-container *ngIf="menu.drinkName">
                                                                        , {{menu.drinkName}}
                                                                    </ng-container>
                                                                </p>
                                                                <ng-container *ngIf="menu.extras.length > 0">
                                                                    <ng-container
                                                                        *ngFor="let extra of menu.extras; let i = index; let last = last">
                                                                        <span
                                                                            class="text-light-white cart-text-extras">{{extra.name}}</span>
                                                                        <span *ngIf="!last">, </span>
                                                                    </ng-container>
                                                                </ng-container>
                                                            </a>
                                                        </div>
                                                        <div class="price">
                                                            <a class="text-dark-white fw-500">{{menu.totalPrice}} Ft</a>
                                                        </div>
                                                        <div class="delete-btn"
                                                            (click)="openDeleteModal(orderItemDelete, menu)">
                                                            <a class="text-dark-white cart-trash">
                                                                <i class="far fa-trash-alt"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngFor="let drink of order.drink; let i = index">
                                                <div class="cat-product-box">
                                                    <div class="cat-product">
                                                        <div class="cat-name">
                                                            <a>
                                                                <p class="text-with cart-text mr-2">
                                                                    <span
                                                                        class="text-dark-white">{{drink.quantity}}</span>
                                                                    {{drink.name}}
                                                                </p>
                                                            </a>
                                                        </div>
                                                        <div class="price">
                                                            <a class="text-dark-white fw-500">{{drink.totalPrice}}
                                                                Ft</a>
                                                        </div>
                                                        <div class="delete-btn"
                                                            (click)="openDeleteModal(orderItemDelete, drink)">
                                                            <a class="text-dark-white cart-trash">
                                                                <i class="far fa-trash-alt"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngFor="let side of order.side; let i = index">
                                                <div class="cat-product-box">
                                                    <div class="cat-product">
                                                        <div class="cat-name">
                                                            <a>
                                                                <p class="text-with cart-text mr-2">
                                                                    <span
                                                                        class="text-dark-white">{{side.quantity}}</span>
                                                                    {{side.name}}
                                                                </p>
                                                            </a>
                                                        </div>
                                                        <div class="price">
                                                            <a class="text-dark-white fw-500">{{side.totalPrice}} Ft</a>
                                                        </div>
                                                        <div class="delete-btn"
                                                            (click)="openDeleteModal(orderItemDelete, side)">
                                                            <a class="text-dark-white cart-trash">
                                                                <i class="far fa-trash-alt"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngFor="let meal of order.meal; let i = index">
                                                <div class="cat-product-box">
                                                    <div class="cat-product">
                                                        <div class="cat-name">
                                                            <a>
                                                                <p class="text-with cart-text mr-2">
                                                                    <span
                                                                        class="text-dark-white">{{meal.quantity}}</span>
                                                                    {{meal.mealName}}
                                                                    <ng-container *ngIf="meal.sideName">
                                                                        , {{meal.sideName}}
                                                                    </ng-container>
                                                                    <ng-container *ngIf="meal.drinkName">
                                                                        , {{meal.drinkName}}
                                                                    </ng-container>
                                                                </p>
                                                                <ng-container *ngIf="meal.extras.length > 0">
                                                                    <ng-container
                                                                        *ngFor="let extra of meal.extras; let i = index; let last = last">
                                                                        <span
                                                                            class="text-light-white cart-text-extras">{{extra.name}}</span>
                                                                        <span *ngIf="!last"> ,</span>
                                                                    </ng-container>
                                                                </ng-container>
                                                            </a>
                                                        </div>
                                                        <div class="price">
                                                            <a class="text-dark-white fw-500">{{meal.totalPrice}} Ft</a>
                                                        </div>
                                                        <div class="delete-btn"
                                                            (click)="openDeleteModal(orderItemDelete, meal)">
                                                            <a class="text-dark-white cart-trash">
                                                                <i class="far fa-trash-alt"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>

                                            <ng-container *ngFor="let pizza of order.pizza; let i = index">
                                                <div class="cat-product-box">
                                                    <div class="cat-product">
                                                        <div class="cat-name">
                                                            <a>
                                                                <p class="text-with cart-text mr-2">
                                                                    <span
                                                                        class="text-dark-white">{{pizza.quantity}}</span>
                                                                    {{pizza.sizeName}} egyedi pizza
                                                                </p>
                                                                <div>
                                                                    <span
                                                                        class="text-light-white cart-text-extras">{{pizza?.doughName}},
                                                                    </span>
                                                                    <span
                                                                        class="text-light-white cart-text-extras">{{pizza?.baseName}}
                                                                    </span>
                                                                </div>
                                                                <div>
                                                                    <ng-container *ngIf="pizza.toppings.length > 0">
                                                                        <span
                                                                            class="text-light-white cart-text-extras">Feltét(ek):
                                                                        </span>
                                                                        <ng-container
                                                                            *ngFor="let topping of pizza.toppings; let i = index; let last = last">
                                                                            <span
                                                                                class="text-light-white cart-text-extras">{{topping.name}}</span>
                                                                            <span *ngIf="!last">, </span>
                                                                        </ng-container>
                                                                    </ng-container>
                                                                </div>
                                                                <div>
                                                                    <ng-container *ngIf="pizza.sauces.length > 0">
                                                                        <span
                                                                            class="text-light-white cart-text-extras">Szósz(ok):
                                                                        </span>
                                                                        <ng-container
                                                                            *ngFor="let sauce of pizza.sauces; let i = index; let last = last">
                                                                            <span
                                                                                class="text-light-white cart-text-extras">{{sauce.name}}</span>
                                                                            <span *ngIf="!last">, </span>
                                                                        </ng-container>
                                                                    </ng-container>
                                                                </div>
                                                            </a>
                                                        </div>
                                                        <div class="price">
                                                            <a class="text-dark-white fw-500">{{pizza.totalPrice}}
                                                                Ft</a>
                                                        </div>
                                                        <div class="delete-btn"
                                                            (click)="openDeleteModal(orderItemDelete, pizza)">
                                                            <a class="text-dark-white cart-trash">
                                                                <i class="far fa-trash-alt"></i>
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <div class="item-total">
                                                <div *ngIf="totalPrice" class="total-price border-0"> <span
                                                        class="text-dark-white fw-700">Tételek
                                                        összesen:</span>
                                                    <span class="text-dark-white fw-700">{{totalPrice}} Ft</span>
                                                </div>
                                                <div class="empty-bag padding-15 fw-700">
                                                    <a (click)="openDeleteModal(cartDelete)"
                                                        class="empty-bag padding-15 fw-700 pl-0 cursor-pointer">Kosár
                                                        ürítése</a>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                </div>
                                <ng-container *ngIf="isLoggedIn() && order && totalPrice">
                                    <div class="card-footer padding-15">
                                        <button class="btn-first green-btn text-custom-white full-width fw-500 with-btn"
                                            (click)="placeOrder()"
                                            [disabled]="!isMinimumOrderCompleted() || isRestaurantClosed()">
                                            Tovább
                                            a
                                            megrendeléshez
                                        </button>
                                        <div *ngIf="!isMinimumOrderCompleted()" class="text-center mt-2">
                                            <small class="text-danger">Az étterem minimális rendelési értéke:
                                                {{restaurant.minimumordervalue}} Ft</small>
                                        </div>
                                        <div *ngIf="isRestaurantClosed()" class="text-center mt-2">
                                            <small class="text-danger">Az étterem jelenleg zárva van, ezért nem
                                                lehetséges
                                                rendelést leadni!</small>
                                        </div>
                                    </div>
                                </ng-container>
                                <ng-template #noOrder>
                                    <ng-container *ngIf="isRestaurantClosed()">
                                        <p class="text-light-white no-order closed">Az étterem jelenleg zárva van,
                                            nézzen
                                            vissza később!</p>
                                    </ng-container>
                                    <ng-container *ngIf="!isRestaurantClosed()">
                                        <p class="text-light-white no-order">Nincs tétel a kosarában!</p>
                                        <p class="text-light-white no-order-description">Nem adott még semmit a
                                            kosarához,
                                            amennyiben rendelni szeretne, válasszon az étterem ajánlatai közül.</p>
                                    </ng-container>
                                </ng-template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- restaurent meals -->

    <div class="modal fade restaurent-popup" id="restaurent-popup">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button #productModalClose type="button" class="close" data-dismiss="modal">&times;</button>
                    <img src="{{selectedProduct?.image}}" class="img-fluid full-width" alt="product-image">
                </div>
                <form *ngIf="selectedProductForm" [formGroup]="selectedProductForm">
                    <div class="modal-body">
                        <div class="name padding-10">
                            <h3 class="text-light-black fw-700 mb-2">{{selectedProduct?.name}}
                                <span *ngIf="selectedProduct?.is_sale" class="with-product-tag-sale">Akció</span>
                            </h3>
                            <ng-container *ngIf="selectedProduct?.is_sale">
                                <h5 class="text-light-black fw-600 no-margin"><span
                                        class="with-product-old-price">{{selectedProduct.old_price}} Ft</span>
                                    {{selectedProduct?.price | number:'1.0-0'}} Ft</h5>
                            </ng-container>
                            <ng-container *ngIf="!selectedProduct?.is_sale">
                                <h5 class="text-light-black fw-600 no-margin">
                                    {{selectedProduct?.price | number:'1.0-0'}} Ft</h5>
                            </ng-container>
                        </div>
                        <div class="padding-10 no-top-bottom-padding">
                            <p *ngIf="selectedProduct?.type === 'menu'" class="text-light-black with-product-margin">
                                <span class="with-product-tag-menu">Menü</span>
                                Ehhez az ételhez előfordulhat, hogy köretet és italt is választani kell.
                            </p>
                            <p *ngIf="selectedProduct?.description" class="text-light-black with-product-margin">
                                <b>Leírás:
                                </b>{{selectedProduct?.description}}
                            </p>
                            <p *ngIf="selectedProduct?.calorie" class="text-light-black with-product-margin"><b>Kalória
                                    tartalom: </b>körülbelül {{selectedProduct?.calorie}} Kalória
                            </p>
                            <div class="with-product-icons-detail">
                                <div *ngIf="selectedProduct?.is_vegan" class="with-product-icon-detail"><img
                                        class="with-product-icon" src="assets/img/icons/vegan.png"> Vegán termék</div>
                                <div *ngIf="selectedProduct?.is_vegetarian" class="with-product-icon-detail"><img
                                        class="with-product-icon" src="assets/img/icons/vegetarian.png"> Vegetáriánius
                                    termék
                                </div>
                                <div *ngIf="selectedProduct?.is_glutenfree" class="with-product-icon-detail"><img
                                        class="with-product-icon" src="assets/img/icons/glutenfree.png"> Glutén mentes
                                    termék
                                </div>
                                <div *ngIf="selectedProduct?.is_sugarfree" class="with-product-icon-detail"><img
                                        class="with-product-icon" src="assets/img/icons/sugarfree.png"> Cukor mentes
                                    termék
                                </div>
                                <div *ngIf="selectedProduct?.is_allergenicfree" class="with-product-icon-detail"><img
                                        class="with-product-icon" src="assets/img/icons/allergicfree.png"> Ez a termék
                                    nem
                                    tartalmaz allergén anyagokat
                                </div>
                                <div *ngIf="selectedProduct?.is_fatfree" class="with-product-icon-detail"><img
                                        class="with-product-icon" src="assets/img/icons/fatfree.png"> Ez a termék nem
                                    tartalmaz
                                    hozzá adott zsírt</div>
                                <div *ngIf="selectedProduct?.is_lactosefree" class="with-product-icon-detail"><img
                                        class="with-product-icon" src="assets/img/icons/lactosefree.png"> Laktóz mentes
                                    termék
                                </div>
                                <div *ngIf="selectedProduct?.is_alcoholfree" class="with-product-icon-detail"><img
                                        class="with-product-icon" src="assets/img/icons/alcoholfree.png"> Alkohol mentes
                                    termék
                                </div>
                            </div>
                        </div>
                        <div class="u-line">
                            <div class="product-quantity padding-10"> <span
                                    class="text-light-black fw-700 fs-16">Mennyiség</span>
                                <div class="input-group quantity">
                                    <div class="input-group-append">
                                        <button class="minus-btn" type="button" name="button"
                                            (click)="decreaseQuantity()">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                    </div>
                                    <input id="quantity" type="text" class="text-center" name="quantity"
                                        formControlName="quantity" [readonly]="true">
                                    <div class="input-group-prepend">
                                        <button class="plus-btn" type="button" name="button"
                                            (click)="increaseQuantity()"><i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- sub product -->
                        <div class="additional-product">
                            <div *ngIf="selectedProduct?.sides.length > 0" class="card">
                                <div class="card-header">
                                    <h5 class="no-margin">
                                        <a class="card-link collapsed text-light-black fw-700" data-toggle="collapse"
                                            href="#additionalOne">
                                            <span>Válasszon köretet <span *ngIf="isSelectedProductMenu()"
                                                    class="text-light-white fw-500 fs-12 padding-tb-10">Kötelező</span></span>
                                        </a>
                                    </h5>
                                </div>
                                <div id="additionalOne" class="collapse">
                                    <div class="card-body">
                                        <ng-container *ngIf="selectedProduct?.sides.length > 0; else noSides">
                                            <ng-container *ngFor="let side of selectedProduct?.sides; let i = index">
                                                <div class="form-check with-check d-block">
                                                    <input class="form-check-input extra-input" type="radio"
                                                        name="selectedSide" id="side-{{i}}" value="{{side.id}}"
                                                        formControlName="selectedSide">
                                                    <img src="{{side.image}}" alt="{{side.name}}">
                                                    <label class="form-check-label" for="selectedSide">
                                                        {{side.name}}
                                                    </label>
                                                    <label *ngIf="side.price !== '0'" class="price extra-input-price"
                                                        for="side-{{i}}">{{side.price}} Ft</label>
                                                    <label *ngIf="side.price === '0'" class="price extra-input-price"
                                                        for="side-{{i}}">Ingyenes</label>
                                                </div>
                                            </ng-container>
                                        </ng-container>
                                        <ng-template #noSides>
                                            <p>Nincs kiválasztható köret</p>
                                        </ng-template>
                                    </div>
                                </div>
                            </div>

                            <div *ngIf="selectedProduct?.drinks.length > 0" class="card">
                                <div class="card-header">
                                    <h5 class="no-margin">
                                        <a class="card-link collapsed text-light-black fw-700" data-toggle="collapse"
                                            href="#additionalTwo">
                                            <span>Válasszon italt<span *ngIf="isSelectedProductMenu()"
                                                    class="text-light-white fw-500 fs-12 padding-tb-10">Kötelező</span></span>
                                        </a>
                                    </h5>
                                </div>
                                <div id="additionalTwo" class="collapse">
                                    <div class="card-body">
                                        <ng-container *ngIf="selectedProduct?.drinks.length > 0; else noDrinks">
                                            <ng-container *ngFor="let drink of selectedProduct?.drinks; let i = index">
                                                <div class="form-check with-check d-block">
                                                    <input class="form-check-input extra-input" type="radio"
                                                        name="selectedDrink" id="drink-{{i}}" value="{{drink.id}}"
                                                        formControlName="selectedDrink">
                                                    <img src="{{drink.image}}" alt="{{drink.image}}">
                                                    <label class="form-check-label" for="selectedDrink">
                                                        {{drink.name}}
                                                    </label>
                                                    <label *ngIf="drink.price !== '0'" class="price extra-input-price"
                                                        for="drink-{{i}}">{{drink.price}} Ft</label>
                                                    <label *ngIf="drink.price === '0'" class="price extra-input-price"
                                                        for="drink-{{i}}">Ingyenes</label>
                                                </div>
                                            </ng-container>
                                        </ng-container>
                                        <ng-template #noDrinks>
                                            <p>Nincs kiválasztható ital</p>
                                        </ng-template>
                                    </div>
                                </div>
                            </div>

                            <div *ngIf="selectedProduct?.extras.length > 0" class="card">
                                <div class="card-header">
                                    <h5 class="no-margin">
                                        <a class="card-link collapsed text-light-black fw-700" data-toggle="collapse"
                                            href="#additionalThree">
                                            <span>Válasszon extrát <span *ngIf="selectedProduct?.extralimit"
                                                    class="text-light-white fw-500 fs-12 padding-tb-10">Maximum
                                                    {{selectedProduct?.extralimit}} extra
                                                    választható.</span></span>
                                        </a>
                                    </h5>
                                </div>
                                <div id="additionalThree" class="collapse">
                                    <div class="card-body">
                                        <ng-container *ngIf="selectedProduct?.extras.length > 0; else noExtra">
                                            <ng-container *ngFor="let extra of selectedProduct?.extras; let i = index">
                                                <div class="form-check with-check d-block">
                                                    <input class="form-check-input extra-input" type="checkbox"
                                                        (change)="extraCheckBoxChange(extra.id, $event.target.checked)"
                                                        name="extra-{{i}}" id="extra-{{i}}" value="{{extra.id}}">
                                                    <label class="form-check-label" for="extra-{{i}}">
                                                        {{extra.name}}
                                                    </label>
                                                    <label *ngIf="extra.price !== '0'" class="price extra-input-price"
                                                        for="extra-{{i}}">{{extra.price}} Ft</label>
                                                    <label *ngIf="extra.price === '0'" class="price extra-input-price"
                                                        for="extra-{{i}}">Ingyenes</label>
                                                </div>
                                            </ng-container>
                                        </ng-container>
                                        <ng-template #noExtra>
                                            <p>Nincs kiválasztható extra</p>
                                        </ng-template>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- sub product -->
                    </div>
                    <div class="modal-footer padding-10">
                        <button class="btn-second with-btn btn-submit" (click)="addSelectedProductToCart()"
                            [disabled]="!isLoggedIn() || !this.selectedProductForm.valid || isRestaurantClosed()">Kosárba:
                            {{selectedProductForm.value.totalPrice}} Ft</button>
                        <ng-container *ngIf="!isLoggedIn()">
                            <p class="with-alert ">A rendelés összeállításához és leadásához bejelentkezés szükséges!
                            </p>
                        </ng-container>
                        <ng-container *ngIf="isLoggedIn() && isRestaurantClosed()">
                            <p class="with-alert mt-4">Az étterem jelenleg zárva van, nézzen vissza később!</p>
                        </ng-container>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="modal fade missing-zip" id="missing-zip">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="mb-0">Nézzük, hogy a(z) {{restaurant.restaurantname}} szállít-e önhöz.</h5>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Az irányítószámának megadásához kattintson az alábbi gombra.</p>
                </div>
                <div class="modal-footer padding-10">
                    <button class="btn-second with-btn btn-submit"
                        (click)="locationService.changeIsLocationSelectorOpen(true)" data-dismiss="modal">Irányítószám
                        megadása</button>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<ng-template #orderItemDelete>
    <app-delete-order-modal [selectedOrderItem]="selectedOrderItem" (closeModal)="closeModal()"
        (deleteSelectedOrderItem)="deleteSelectedOrderItem($event)">
    </app-delete-order-modal>
</ng-template>

<ng-template #cartDelete>
    <app-delete-all-order-modal (closeModal)="closeModal()" (deleteCart)="resetOrder()">
    </app-delete-all-order-modal>
</ng-template>